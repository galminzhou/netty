package io.netty.test.test02;import io.netty.buffer.ByteBuf;import io.netty.channel.ChannelHandlerContext;import io.netty.handler.codec.ByteToMessageDecoder;import io.netty.handler.codec.TooLongFrameException;import java.util.List;public class SafeByteToMessageDecoder extends ByteToMessageDecoder {    public final static int MAX_FRAME_SIZE = 1024;    @Override    protected void decode(ChannelHandlerContext ctx, ByteBuf in, List<Object> out) throws Exception {        int readable = in.readableBytes();        // 若缓冲区数据超出最大帧范围，则忽略所有可读的字节，        // 并通过抛出 TooLongFrameException 异常，通知 ChannelPipeline 中的 ChannelHandler 此帧数据超长        if (readable > MAX_FRAME_SIZE) {            in.skipBytes(readable);            throw new TooLongFrameException("frame too big!");        }        // do something...    }}